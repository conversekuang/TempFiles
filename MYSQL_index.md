## MySQL Index



回表：回到主键索引数搜索的过程称为回表

查询结果所需要的数据只在主键索引上有，所以不得不回表。



### 覆盖索引



在查询结果中，索引已经覆盖了查询需求则称为覆盖索引。index是k，主键是id，则在k中查id则直接返回，而查询name等，需要回表到主键索引上。

由于覆盖索引可以减少树的搜索次数，显著提升查询性能，所以使用覆盖索引是一个常用的性能优化手段。

因此，在建立冗余索引来支持覆盖索引时就需要权衡考虑了。DBA需要考虑的事情。



### 最左前缀原则

B+ 树这种索引结构，可以利用索引的“最左前缀”，来定位记录。

不只是索引的全部定义，只要满足最左前缀就可以利用索引来减速检索。可以是最左的N个字段，或者M个字符。

索引可以有单索引和联合索引。

第一原则：如果通过调整顺序，可以少维护一个索引，那么这个顺序往往就是需要优先考虑采用的。

第二原则：空间。当建立(a,b)联合索引后，还要对b进行索引，而a字段更消耗空间。则需要创建(a,b)和(b)两个索引。因为a更耗。而(a,b)可以实现(a),(a,b)的索引。



### 索引下推

可以在索引遍历过程中，对索引中包含的字段先做判断，直接过滤掉不满足条件的记录，减少回表次数。



前提是：SQL语句中的字段，在index中也存在的情况。

MySQL5.6之前，符合索引的值需要回表到主键索引上再判断其他条件。

MySQL5.6之后，可在找到符合索引上判断其他条件，直接过滤掉不满足的记录，减少回表次数。





### 小结

在语句满足需求的情况下，尽量的少访问资源是数据库设计的重要原则之一。设计表结构要减少资源消耗为目标。



