#### flask服务通过路由器映射到外部

首先需要保证同局域网（自己路由器）内的其他设备可以访问服务器，其次，通过映射后的WAN内可以访问服务器（公司内网）。

以下是今天将服务通过路由器向外映射时候遇到的问题。



**路由器**：

今天将写好的服务提供给公司内网的同事，如果直接是本机提供的话，问题不大，直接访问内网IP即可。因为自己还接了一个路由器，则需要将主机和端口暴露，以此来提供服务。

DMZ：指定局域网内的某个主机进行暴露，将访问路由器的所有端口都映射到指定主机上。

- 当指定电脑的所有的端口均需要对外暴露，则DMZ很适合。
- 若映射端口较少，则该方式对外暴露很多不必要的端口

虚拟服务器：外映射指定的端口，将部署[Web服务器](https://www.baidu.com/s?wd=Web服务器&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)的电脑进行IP: PORT进行映射。

- 路由器可以自由的对局域网内的电脑进行映射配置，而不拘泥于某一台电脑。适合局域网内多个主机提供不同的服务。A与B在同一局域网，A: 5000，B: 8080, 通过该方式，外部均可访问。

参考：

​	https://baijiahao.baidu.com/s?id=1629611274570738375&wfr=spider&for=pc

在路由器中找到虚拟主机：然后填写好WAN端口，LAN主机，LAN的Port，选择的协议。开启即可工作。



**flask中**：

​	app.run( )。默认的host是127.0.0.1，然而，同局域网的手机都不能访问。因此，根据手册，为了让其他设备能访问到，host需要设置为0.0.0.0。

​	此外，flask提醒在生产模式中需要自己部署服务器。这里因为写的程序不大，自己使用的。所以暂且没有上nginx。



**PC上**：

​	将防火墙关闭。



之前对WAN 和LAN 的概念比较模糊，经过这次设置，对这个概念更清晰。

WAN：广域网( wide area network).  

 LAN：局域网( local area network). 

WLAN：无线局域网。

其实WAN 和LAN是相对的，在范围上WAN大于LAN。对于路由器，进口是WAN，有多个出口的是LAN。为什么说是相对的？对于个人家里接的路由器，家里是LAN，接入家的小区网络是WAN。而对于小区而说，小区是LAN，则接入小区的片区网络是WAN。

从路由器的进出口，很好表现出层级的关系WAN是对外的，LAN是对内的。而WLAN则是无线局域网。并非有线的方式。



WiFi可以认为是WLAN的一部分，子集与超集的关系。

wifi：

- 侧重于局域网的设备通过wifi获取网络。
- 覆盖范围相对小

Wlan：

- 侧重于采用的无线技术，将我们的计算机设备连接起来，构成一个可以进行网络共享的体系。

- 覆盖范围大



