---

---

# 调表笔记

二分查找基于的是有序数组，数组需要连续的内存空间。链表中如何使用二分查找法进行实现？

> **跳表**：链表加多级索引的结构

特点：类似于链表的二分查找。各方面性能都比较优秀的动态数据结构，可以支持快速的插入、删除、查找。



在链表中查找某个数需要遍历链表，时间复杂度为O(n)。

如何提升效率？可以添加一级索引，每两个节点提取一个节点到上一级做索引。加多级索引后，查找的效率提升。



**提升效率**：

**每两个节点抽出一个节点到上一级当索引**，那么第k级的索引为2，则
$$
n/2^k = 2
$$
`k = log(n)-1`

加上原始的链表，则k = logn。共有K级索引。若每级索引需要检查m个节点，则共需要mlogn个节点。



那每层索引需要查找几个节点？m =3. 

当k级向下，为k-1级时。需要遍历3个节点，（y, 中间节点, z）。

![img](https://static001.geekbang.org/resource/image/d0/0c/d03bef9a64a0368e6a0d23ace8bd450c.jpg)

以空间换时间，多创建索引来提高查找效率。



**调表多少浪费空间**

每两个节点抽出一个节点到上一级当索引，如上，将这几级索引的结点总和就是 n/2+n/4+n/8…+8+4+2=n-2。跳表的空间复杂度是 O(n)。也就是说，如果将包含 n 个结点的单链表构造成跳表，我们需要额外再用n个节点的存储空间。

每三个节点抽出一个节点到上一级当索引。n/3+n/9+n/27+…+9+3+1=n/2。跳表的空间复杂度是 O(n)。

其实索引只是指针，不存对象。所以当对象内存很大的情况下，索引所占的空间很小。索引索引不是很消耗空间。



**高效的动态插入和删除**

插入：需要先查找再插入   O(logn)

删除：需要定位前驱节点   O(logn)



插入数据太多可能会导致链表退化为单链表的查找效率，因此需要对索引进行插入。

**更新索引**：随机更新算法



